# 📊 Final Data Directory

**한국 기업 부실예측 모델링을 위한 최종 데이터셋**

## 🎯 **두 가지 데이터 트랙**

이 프로젝트는 **두 가지 서로 다른 데이터 트랙**을 제공하여 다양한 모델링 접근법을 지원합니다.

### 🔥 **확장 트랙** (FS_ratio_flow_labeled.csv)
```
📊 데이터 규모: 22,780개 관측치 × 36개 변수 (2630개 기업)
👥 부실기업: 132개 (0.58%)
📅 기간: 2012-2023년 (12년)
🎯 특징: 고급 재무변수 및 성장률 지표 포함
```

**주요 특징:**
- **YoY 성장률**: 자산, 이익잉여금, 영업이익, 순이익 성장률
- **변화량 지표**: 부채비율, 유동비율, 총이익률, ROE 변화량
- **고급 지표**: 발생액, 단기부채 의존도, 차입 의존도
- **시장 지표**: 3개월/9개월 수익률, 시장가 대 장부가 비율

**변수 목록 (36개):**
```
기본 재무비율 (17개): ROA, TLTA, WC_TA, CFO_TD, SIGMA, RE_TA, EBIT_TA, 
                     MVE_TL, S_TA, CLCA, OENEG, CR, CFO_TA, TLMTA, 
                     RET_3M, RET_9M, MB
성장률 지표 (4개): 자산_YoY_성장률, 이익잉여금_YoY_성장률, 
                  영업이익_YoY_성장률, 순이익_YoY_성장률
변화량 지표 (8개): 부채비율_변화량, 유동비율_변화량, 총이익률_변화량, 
                  ROE_변화량, 총자본회전률_변화량, 운전자본회전률_변화량
고급 지표 (6개): 단기부채_의존도, 차입_의존도, 발생액, 이익수익률, 
                매출액_대비_현금흐름
타겟 변수 (1개): default
```

### ✅ **완전 트랙** (FS_100_complete.csv)
```
📊 데이터 규모: 16,197개 관측치 × 22개 변수
👥 부실기업: 104개 (0.64%)
📅 기간: 2012-2023년 (12년)
🎯 특징: 결측치 0%, 다중공선성 해결 완료
```

**주요 특징:**
- **100% 완전 데이터**: 모든 관측치에서 결측치 없음
- **다중공선성 해결**: VIF < 5 달성
- **핵심 지표 집중**: 가장 중요한 17개 재무지표 + K2_Score
- **안정적 모델링**: 운영 환경에 최적화

**변수 목록 (22개):**
```
핵심 재무비율 (17개): ROA, TLTA, WC_TA, CFO_TD, SIGMA, RE_TA, EBIT_TA,
                     MVE_TL, S_TA, CLCA, OENEG, CR, CFO_TA, TLMTA,
                     RET_3M, RET_9M, MB
추가 지표 (4개): K2_Score_Original (한국형 신용점수)
타겟 변수 (1개): default
```

## 📈 **트랙별 비교 분석**

| 구분 | 🔥 확장 트랙 | ✅ 완전 트랙 |
|------|-------------|-------------|
| **관측치 수** | 22,780개 | 16,197개 |
| **변수 수** | 36개 | 22개 |
| **부실기업** | 132개 (0.58%) | 104개 (0.64%) |
| **결측치** | 일부 존재 | 0% (완전) |
| **다중공선성** | 일부 존재 | 해결 완료 |
| **주요 용도** | 고급 특성공학, 복합 모델링 | 안정적 운영, 기본 모델링 |
| **권장 대상** | 연구자, 고급 분석가 | 실무진, 운영 환경 |

## 📁 **파일 구조**

### 🔥 **확장 트랙 관련 파일**
```
📄 FS_ratio_flow_labeled.csv          # 원본 확장 데이터 (22,780×36)
📄 FS_ratio_flow.csv                  # 라벨링 전 데이터
📄 FS_ratio_flow_backup.csv           # 백업 파일

📊 분할된 데이터:
📄 X_train.csv                        # 훈련용 특성 (13,668×35)
📄 X_val.csv                          # 검증용 특성 (4,556×35)  
📄 X_test.csv                         # 테스트용 특성 (4,556×35)
📄 y_train.csv                        # 훈련용 타겟 (13,668×1)
📄 y_val.csv                          # 검증용 타겟 (4,556×1)
📄 y_test.csv                         # 테스트용 타겟 (4,556×1)
```

### ✅ **완전 트랙 관련 파일**
```
📄 FS_100_complete.csv                # 원본 완전 데이터 (16,197×22)

📊 분할된 데이터:
📄 X_train_100_normal.csv             # 훈련용 특성 (6,480×21)
📄 X_valid_100_normal.csv             # 검증용 특성 (4,861×21)
📄 X_test_100_normal.csv              # 테스트용 특성 (4,862×21)
📄 y_train_100_normal.csv             # 훈련용 타겟 (6,480×1)
📄 y_valid_100_normal.csv             # 검증용 타겟 (4,861×1)
📄 y_test_100_normal.csv              # 테스트용 타겟 (4,862×1)

📊 메타데이터:
📄 meta_train_100.csv                 # 훈련용 메타정보 (회사명, 코드, 연도)
📄 meta_valid_100.csv                 # 검증용 메타정보
📄 meta_test_100.csv                  # 테스트용 메타정보
```

### 🔧 **공통 파일**
```
📄 scaler_standard.pkl                # 표준화 스케일러
📄 scaler_robust.pkl                  # 로버스트 스케일러
📄 preprocessing_report.html          # 전처리 보고서 (HTML)
📄 preprocessing_report.txt           # 전처리 보고서 (텍스트)
```

## 🎯 **사용 가이드**

### 🔥 **확장 트랙 사용 시**
```python
import pandas as pd

# 원본 데이터 로드
df_extended = pd.read_csv('data/final/FS_ratio_flow_labeled.csv')
print(f"Shape: {df_extended.shape}")  # (22780, 36)

# 분할된 데이터 로드
X_train = pd.read_csv('data/final/X_train.csv')
y_train = pd.read_csv('data/final/y_train.csv')

# 고급 특성 확인
growth_features = [col for col in df_extended.columns if 'YoY' in col]
change_features = [col for col in df_extended.columns if '변화량' in col]
print(f"성장률 지표: {len(growth_features)}개")
print(f"변화량 지표: {len(change_features)}개")
```

### ✅ **완전 트랙 사용 시**
```python
import pandas as pd

# 원본 데이터 로드
df_complete = pd.read_csv('data/final/FS_100_complete.csv')
print(f"Shape: {df_complete.shape}")  # (16197, 22)

# 분할된 데이터 로드
X_train = pd.read_csv('data/final/X_train_100_normal.csv')
y_train = pd.read_csv('data/final/y_train_100_normal.csv')

# 결측치 확인 (모두 0이어야 함)
print(f"결측치 수: {df_complete.isnull().sum().sum()}")  # 0

# 메타데이터 로드
meta_train = pd.read_csv('data/final/meta_train_100.csv')
```

## 📊 **데이터 품질 지표**

### 🔥 **확장 트랙 품질**
- **완전성**: 약 71% (일부 고급 지표에서 결측치 존재)
- **일관성**: 높음 (표준화된 재무비율 계산)
- **정확성**: 높음 (DART 공시 데이터 기반)
- **적시성**: 최신 (2023년까지 포함)

### ✅ **완전 트랙 품질**
- **완전성**: 100% (결측치 완전 제거)
- **일관성**: 매우 높음 (표준화 완료)
- **정확성**: 매우 높음 (검증 완료)
- **적시성**: 최신 (2023년까지 포함)

## 🎪 **앙상블 모델 성능**

### 🏆 **최고 성능 달성**
```
🎯 F1-Score: 0.4096
📈 AUC: 0.9808
⚖️ Balanced Accuracy: 0.8223
🎪 앙상블 구성: 9개 모델 균등 가중치
```

### 📊 **트랙별 모델 성능**
| 트랙 | 최적 모델 | F1-Score | AUC | 특징 |
|------|----------|----------|-----|------|
| **🔥 확장** | XGBoost | 0.3380 | 0.9800 | 풍부한 특성 활용 |
| **✅ 완전** | XGBoost | 0.3380 | 0.9755 | 안정적 성능 |
| **🎭 앙상블** | Mixed | **0.4096** | **0.9808** | 최고 성능 |

## 🔍 **주요 특성 중요도**

### 🏅 **Top 10 중요 변수** (XGBoost 기준)
1. **ROA** (총자산수익률): 0.089 - 수익성의 핵심
2. **MVE_TL** (시가총액/총부채): 0.078 - 시장 평가
3. **EBIT_TA** (EBIT/총자산): 0.077 - 영업 효율성
4. **SIGMA** (주가 변동성): 0.069 - 위험 지표
5. **TLTA** (총부채/총자산): 0.066 - 재무 레버리지
6. **CFO_TD** (영업CF/총부채): 0.064 - 현금 창출력
7. **RE_TA** (이익잉여금/총자산): 0.062 - 내부 유보
8. **WC_TA** (운전자본/총자산): 0.061 - 유동성
9. **S_TA** (매출액/총자산): 0.059 - 자산 효율성
10. **MB** (시장가/장부가): 0.057 - 시장 프리미엄

## ⚙️ **데이터 전처리 세부사항**

### 🔧 **전처리 파이프라인**
1. **원본 데이터 수집**: DART 전자공시 (2012-2023)
2. **재무비율 계산**: 17개 핵심 지표 생성
3. **결측치 처리**: 
   - 확장 트랙: 고급 지표 결측치 유지
   - 완전 트랙: 결측치 완전 제거
4. **이상치 처리**: IQR 기반 체계적 처리
5. **정규화**: Standard/Robust Scaler 적용
6. **다중공선성 해결**: VIF < 5 달성

## 🏆 **데이터 품질 요약**

✅ **두 가지 트랙**: 다양한 모델링 접근법 지원  
✅ **대용량 데이터**: 22,780개 관측치 (확장 트랙)  
✅ **완전한 데이터**: 16,197개 결측치 0% (완전 트랙)  
✅ **검증된 품질**: 다중공선성 해결, 이상치 처리 완료  
✅ **실무 적용**: 투자, 신용평가, 리스크 관리 활용 가능  

**🎯 한국 기업 부실예측을 위한 최고 품질의 데이터셋!**

---

*데이터 사용 시 출처를 명시해 주시기 바랍니다.*  
*상업적 활용 전 관련 법규 검토를 권장합니다.*
